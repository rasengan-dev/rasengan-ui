{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "upload-01",
  "title": "Upload card 1",
  "description": "Upload card 1",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "button"
  ],
  "files": [
    {
      "path": "src/registry/application-ui/cards/upload/upload1.tsx",
      "content": "import { Button } from \"@/components/ui/button\";\nimport { cn, detectFileFormat, formatFileSize, truncateMiddle } from \"@/lib/utils\";\nimport { CheckCircle, Dot, Trash2, UploadCloud, X } from \"lucide-react\";\nimport {\n\tComponentProps,\n\tuseCallback,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tuseState,\n} from \"react\";\n\ntype Props = {\n\tclassName?: ComponentProps<\"section\">[\"className\"];\n};\n\ntype FileObj = {\n\tid: number;\n\tdata: File;\n\tuploading: boolean;\n\tpercentage: number;\n};\n\nexport const UploadFileCard1 = ({ className }: Props) => {\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\n\tconst [files, setFiles] = useState<Array<FileObj>>([]);\n\tconst [isDragging, setIsDragging] = useState(false);\n\n\tconst handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst file = event.target.files?.[0];\n\t\tif (file) {\n\t\t\tconst fileObj = {\n\t\t\t\tid: Date.now(),\n\t\t\t\tdata: file,\n\t\t\t\tuploading: true,\n\t\t\t\tpercentage: 0,\n\t\t\t};\n\n\t\t\tsetFiles((files) => [...files, fileObj]);\n\t\t}\n\t};\n\n\tconst handleDropComponent = (e: React.DragEvent<HTMLDivElement>) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst file = e.dataTransfer.files[0];\n\n\t\tif (file) {\n\t\t\tconst fileObj = {\n\t\t\t\tid: Date.now(),\n\t\t\t\tdata: file,\n\t\t\t\tuploading: true,\n\t\t\t\tpercentage: 0,\n\t\t\t};\n\n\t\t\tsetFiles((files) => [...files, fileObj]);\n\n\t\t\tsetIsDragging(false);\n\t\t}\n\t};\n\n\tconst handleOpenFileExplorer = () => {\n\t\tinputRef.current?.click();\n\t};\n\n\tconst handleDeleteFile = (fileId: number) => {\n\t\tconst prevFiles = [...files];\n\n\t\tconst index = files.findIndex((file) => file.id === fileId);\n\n\t\tif (index !== -1) {\n\t\t\tprevFiles.splice(index, 1);\n\n\t\t\tsetFiles(prevFiles);\n\t\t}\n\t};\n\n\tconst handleUpdateFile = useCallback(\n\t\t(file: FileObj) => {\n\t\t\tconst prevFiles = [...files];\n\n\t\t\tconst index = files.findIndex((f) => f.id === file.id);\n\n\t\t\tif (index !== -1) {\n\t\t\t\tprevFiles[index] = file;\n\n\t\t\t\tsetFiles(prevFiles);\n\t\t\t}\n\t\t},\n\t\t[JSON.stringify(files)]\n\t);\n\n\treturn (\n\t\t<section\n\t\t\tclassName={cn(\n\t\t\t\t\"w-full max-w-[400px] rounded-xl bg-background overflow-hidden shadow-md dark:border-[1px] border-border\",\n\t\t\t\tclassName\n\t\t\t)}\n\t\t>\n\t\t\t<header className='min-h-[60px] border-b-[1px] border-border flex items-center p-4 gap-2'>\n\t\t\t\t<div className='size-12 shrink-0 rounded-full flex items-center justify-center border border-border border-dashed'>\n\t\t\t\t\t<UploadCloud className='text-muted-foreground' />\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h2 className='text-foreground font-bold'>Upload files</h2>\n\t\t\t\t\t<p className='text-muted-foreground text-sm'>\n\t\t\t\t\t\tSelect and upload the files of your choice\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</header>\n\n\t\t\t<section className='p-4'>\n\t\t\t\t<div\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"border-[1px] border-border border-dashed min-h-[200px] rounded-xl flex flex-col items-center justify-center gap-4 py-4\",\n\t\t\t\t\t\tisDragging && \"bg-muted\"\n\t\t\t\t\t)}\n\t\t\t\t\tonDragOver={(e: React.DragEvent<HTMLDivElement>) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}}\n\t\t\t\t\tonDragEnter={(e: React.DragEvent<HTMLDivElement>) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tsetIsDragging(true);\n\t\t\t\t\t}}\n\t\t\t\t\tonDragLeave={(e: React.DragEvent<HTMLDivElement>) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tsetIsDragging(false);\n\t\t\t\t\t}}\n\t\t\t\t\tonDrop={handleDropComponent}\n\t\t\t\t>\n\t\t\t\t\t<UploadCloud className='text-muted-foreground' />\n\n\t\t\t\t\t<div className='w-full flex flex-col items-center gap-2 px-4'>\n\t\t\t\t\t\t<h2 className='text-foreground font-bold text-center text-pretty'>\n\t\t\t\t\t\t\tChoose a file or drag and drop it here\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p className='text-sm text-muted-foreground text-center text-pretty'>\n\t\t\t\t\t\t\tJPEG, PNG, PDF and MP4 formats up to 50 MB\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Button onClick={handleOpenFileExplorer}>Browse File</Button>\n\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='file'\n\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\thidden\n\t\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{files.length > 0 && (\n\t\t\t\t\t<div className='max-h-[220px] overflow-y-auto mt-2 '>\n\t\t\t\t\t\t<div className='flex flex-col gap-2'>\n\t\t\t\t\t\t\t{files.map((file) => (\n\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\tkey={file.id}\n\t\t\t\t\t\t\t\t\tfile={file}\n\t\t\t\t\t\t\t\t\tonDelete={handleDeleteFile}\n\t\t\t\t\t\t\t\t\tonUpdate={handleUpdateFile}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</section>\n\t\t</section>\n\t);\n};\n\nconst FileItem = ({\n\tfile,\n\tonDelete,\n\tonUpdate,\n}: {\n\tfile: FileObj;\n\tonDelete: (fileId: number) => void;\n\tonUpdate: (file: FileObj) => void;\n}) => {\n\tuseEffect(() => {\n\t\tif (!file.uploading) return;\n\n\t\tlet timer = setInterval(() => {\n\t\t\tconst newFile: FileObj = {\n\t\t\t\t...file,\n\t\t\t\tpercentage: Math.min(file.percentage + 20, 100),\n\t\t\t\tuploading: file.percentage + 20 > 100 ? false : true,\n\t\t\t};\n\n\t\t\tonUpdate(newFile);\n\t\t}, 2000);\n\n\t\treturn () => {\n\t\t\tclearInterval(timer);\n\t\t};\n\t}, [file]);\n\n\tconst fileImage = useMemo(() => {\n\t\tconst format = detectFileFormat(file.data.name);\n\n\t\tswitch (format) {\n\t\t\tcase \"IMG\": {\n\t\t\t\treturn \"/static/images/icons/png.png\";\n\t\t\t}\n\n\t\t\tcase \"PDF\": {\n\t\t\t\treturn \"/static/images/icons/pdf.svg\";\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\treturn \"/static/images/icons/pdf.svg\";\n\t\t}\n\t}, [file]);\n\n\treturn (\n\t\t<article className='rounded-xl p-4 border-[1px] border-border transition-all'>\n\t\t\t<div>\n\t\t\t\t<div className='flex items-center gap-2 relative'>\n\t\t\t\t\t<img src={fileImage} alt='File Icon' width={35} height={\"auto\"} />\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h2 className='font-medium text-sm text-foreground'>\n\t\t\t\t\t\t\t{truncateMiddle(file.data.name, 30)}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<div className='flex items-center gap-1'>\n\t\t\t\t\t\t\t<span className='text-[12px] text-muted-foreground'>\n\t\t\t\t\t\t\t\t{formatFileSize((file.data.size * file.percentage) / 100)} of{\" \"}\n\t\t\t\t\t\t\t\t{formatFileSize(file.data.size)}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<Dot size={12} className='text-foreground/50' />\n\t\t\t\t\t\t\t<div className='text-[12px] text-muted-foreground font-medium'>\n\t\t\t\t\t\t\t\t{file.uploading ? (\n\t\t\t\t\t\t\t\t\t<div className='flex items-center gap-1'>\n\t\t\t\t\t\t\t\t\t\t<span className='block border-[1px] border-blue-400 border-dashed rounded-full size-3 animate-spin'></span>\n\t\t\t\t\t\t\t\t\t\t<span className=''>Uploading...</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div className='flex items-center gap-1'>\n\t\t\t\t\t\t\t\t\t\t<span className='block'>\n\t\t\t\t\t\t\t\t\t\t\t<CheckCircle size={14} className='text-green-400' />\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className=''>Completed</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName='absolute right-0 top-0 text-foreground/70'\n\t\t\t\t\t\tonClick={() => onDelete(file.id)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{file.uploading ? <X size={14} /> : <Trash2 size={14} />}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"w-full mt-0 transition-all flex flex-col items-end\",\n\t\t\t\t\t!file.uploading && \"hidden\"\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<p className='block text-[12px] text-foreground ml-auto'>\n\t\t\t\t\t{file.percentage}%\n\t\t\t\t</p>\n\t\t\t\t<div className='w-full h-[6px] overflow-hidden rounded-full bg-muted'>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName='block h-full bg-blue-500 rounded-full transition-all'\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: `${file.percentage}%`,\n\t\t\t\t\t\t}}\n\t\t\t\t\t></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</article>\n\t);\n};\n",
      "type": "registry:component"
    }
  ],
  "type": "registry:block"
}